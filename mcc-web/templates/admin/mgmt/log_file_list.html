{% extends "admin/base_site.html" %}
{% load i18n %}

{% block title %}{{ title }} | {{ site_title|default:_('Django site admin') }}{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
<a href="{% url 'admin:index' %}">{% trans 'Home' %}</a>
&rsaquo; <a href="{% url 'admin:mgmt_log_file_list' %}">{% trans 'Log-Dateien' %}</a>
</div>
{% endblock %}

{% block content %}
<div class="module">
    <table id="result_list" class="table table-striped">
        <thead>
            <tr>
                <th>{% trans 'Log-Datei' %}</th>
                <th>{% trans 'Beschreibung' %}</th>
                <th>{% trans 'Größe' %}</th>
                <th>{% trans 'Status' %}</th>
                <th>{% trans 'Aktionen' %}</th>
            </tr>
        </thead>
        <tbody>
            {% for log_file in log_files %}
            <tr>
                <td>
                    <strong>{{ log_file.display_name }}</strong><br>
                    <small style="color: #666;">{{ log_file.name }}</small>
                </td>
                <td>{{ log_file.description }}</td>
                <td>
                    {% if log_file.exists %}
                        {{ log_file.size_mb }} MB
                    {% else %}
                        <span style="color: #999;">-</span>
                    {% endif %}
                </td>
                <td>
                    {% if log_file.exists %}
                        <span style="color: green;">✓ {% trans 'Verfügbar' %}</span>
                    {% else %}
                        <span style="color: #999;">{% trans 'Noch nicht erstellt' %}</span>
                    {% endif %}
                </td>
                <td>
                    {% if log_file.exists %}
                        <a href="{% url 'admin:mgmt_log_file_viewer' log_file.key %}" class="button">
                            {% trans 'Logs anzeigen' %}
                        </a>
                    {% else %}
                        <span style="color: #999;">-</span>
                    {% endif %}
                </td>
            </tr>
            {% if log_file.rotated_files %}
            <tr style="background-color: #f9f9f9;">
                <td colspan="5" style="padding-left: 40px;">
                    <small><strong>{% trans 'Rotierte Dateien' %}:</strong>
                    {% for rotated in log_file.rotated_files %}
                        <a href="{% url 'admin:mgmt_log_file_viewer_rotated' log_file.key rotated.index %}" style="margin-left: 10px;">
                            {{ rotated.name }} ({{ rotated.size_mb }} MB)
                        </a>
                    {% endfor %}
                    </small>
                </td>
            </tr>
            {% endif %}
            {% endfor %}
        </tbody>
    </table>
</div>

<div class="module" style="margin-top: 20px;">
    <h2>{% trans 'Information' %}</h2>
    <p>
        {% trans 'Log-Dateien werden im logs/ Verzeichnis gespeichert. Sie können Log-Einträge direkt im Admin-GUI anzeigen und durchsuchen.' %}
    </p>
    <p>
        <strong>{% trans 'Hinweis' %}:</strong> {% trans 'Große Log-Dateien können einen Moment zum Laden benötigen. Verwenden Sie die Such- und Filteroptionen, um spezifische Einträge zu finden.' %}
    </p>
</div>
{% endblock %}
