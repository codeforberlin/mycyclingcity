<!-- Copyright (c) 2026 SAI-Lab / MyCyclingCity
     SPDX-License-Identifier: AGPL-3.0-or-later
     
     @file    info_modal.html
     @author  Roland Rutz
     @note    This code was developed with the assistance of AI (LLMs).
-->

{% load i18n %}
<!--
    Information Hub Modal - Global UI Component
    
    This modal provides a unified information center with:
    - Project name and version
    - FAQ section (top 3 questions)
    - Language switcher
    - Legal links (Impressum, Privacy Policy)
    
    To add a new language:
    1. Add the language code to LANGUAGES in config/settings.py
    2. Run: python manage.py makemessages -l <lang_code>
    3. Translate the strings in locale/<lang_code>/LC_MESSAGES/django.po
    4. Run: python manage.py compilemessages
-->
<div class="info-hub-modal-overlay" id="info-hub-modal-overlay" onclick="closeInfoHubModal(event)">
    <div class="info-hub-modal" onclick="event.stopPropagation()">
        <!-- Header: Project Name and Version -->
        <div class="info-hub-header">
            <h2 class="info-hub-title">MyCyclingCity</h2>
            <div class="info-hub-version">
                <span class="info-hub-version-label">{% trans "Version" %}:</span>
                <span class="info-hub-version-value">{{ PROJECT_VERSION|default:"dev" }}</span>
            </div>
        </div>

        <!-- Middle Part: FAQ Section -->
        <div class="info-hub-body">
            <div class="info-hub-section">
                <h3 class="info-hub-section-title">{% trans "H√§ufig gestellte Fragen" %}</h3>
                <div class="info-hub-faq">
                    <div class="info-hub-accordion-item">
                        <div class="info-hub-accordion-header" onclick="toggleInfoHubFAQItem(this)">
                            <div class="info-hub-accordion-question">{% trans "Wie funktioniert die Live-Karte?" %}</div>
                            <div class="info-hub-accordion-icon">‚ñº</div>
                        </div>
                        <div class="info-hub-accordion-content">
                            <div class="info-hub-accordion-answer">
                                {% trans "Die Live-Karte zeigt die aktuellen Positionen aller aktiven Radfahrer in Echtzeit. Sie k√∂nnen zwischen verschiedenen Routen und Gruppen filtern, um die Ansicht anzupassen." %}
                            </div>
                        </div>
                    </div>
                    <div class="info-hub-accordion-item">
                        <div class="info-hub-accordion-header" onclick="toggleInfoHubFAQItem(this)">
                            <div class="info-hub-accordion-question">{% trans "Was zeigt das Ranking?" %}</div>
                            <div class="info-hub-accordion-icon">‚ñº</div>
                        </div>
                        <div class="info-hub-accordion-content">
                            <div class="info-hub-accordion-answer">
                                {% trans "Das Ranking zeigt die aktuelle Kilometerleistung aller Gruppen und Radfahrer, sortiert nach zur√ºckgelegter Strecke. Sie k√∂nnen nach bestimmten Gruppen filtern." %}
                            </div>
                        </div>
                    </div>
                    <div class="info-hub-accordion-item">
                        <div class="info-hub-accordion-header" onclick="toggleInfoHubFAQItem(this)">
                            <div class="info-hub-accordion-question">{% trans "Wie aktualisiert sich die Karte?" %}</div>
                            <div class="info-hub-accordion-icon">‚ñº</div>
                        </div>
                        <div class="info-hub-accordion-content">
                            <div class="info-hub-accordion-answer">
                                {% trans "Die Karte aktualisiert sich automatisch alle 20 Sekunden. Positionen und Kilometerleistung werden in Echtzeit aktualisiert, sobald neue Daten verf√ºgbar sind." %}
                            </div>
                        </div>
                    </div>
                </div>
                {% get_current_language as current_lang %}
                {% if current_lang == 'en' %}
                    <a href="https://codeforberlin.github.io/mycyclingcity/en/guides/map/" target="_blank" class="info-hub-wiki-link">
                {% else %}
                    <a href="https://codeforberlin.github.io/mycyclingcity/guides/map/" target="_blank" class="info-hub-wiki-link">
                {% endif %}
                    üìö {% trans "Vollst√§ndige Dokumentation √∂ffnen" %}
                </a>
            </div>

            <!-- Language Switcher -->
            <div class="info-hub-section">
                <h3 class="info-hub-section-title">{% trans "Sprache" %}</h3>
                <form method="post" action="{% url 'set_language' %}" class="info-hub-language-form">
                    {% csrf_token %}
                    <input type="hidden" name="next" value="{{ request.get_full_path }}">
                    {% get_current_language as current_lang %}
                    <select name="language" id="info-hub-language-select" onchange="this.form.submit();" class="info-hub-language-select">
                        {% for lang_code, lang_name in LANGUAGES %}
                            <option value="{{ lang_code }}" {% if lang_code == current_lang or lang_code|slice:":2" == current_lang|slice:":2" %}selected{% endif %}>
                                {% if lang_code == 'de' %}Deutsch{% elif lang_code == 'en' %}English{% else %}{{ lang_name }}{% endif %}
                            </option>
                        {% endfor %}
                    </select>
                </form>
            </div>
        </div>

        <!-- Footer: Legal Links -->
        <div class="info-hub-footer">
            <div class="info-hub-footer-content">
                <a href="https://sai-lab.de/index.php/de/impressum" target="_blank" class="info-hub-footer-link">{% trans "Impressum" %}</a>
                <span class="info-hub-footer-separator">|</span>
                <a href="{% url 'privacy_policy' %}" class="info-hub-footer-link">{% trans "Datenschutzerkl√§rung" %}</a>
                <span class="info-hub-footer-separator">|</span>
                <span class="info-hub-footer-copyright">&copy; 2026 <a href="https://sai-lab.de" target="_blank">SAI-LAB Berlin</a></span>
            </div>
        </div>

        <!-- Close Button -->
        <button class="info-hub-close" onclick="closeInfoHubModal()" title="{% trans 'Schlie√üen' %}">&times;</button>
    </div>
</div>

